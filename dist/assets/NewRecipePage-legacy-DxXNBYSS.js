System.register(["./index-legacy-BLxyB22v.js"],function(e,l){"use strict";var a,t,i,u,n,o,d,r,c,s,m,f,p,g,_,b,V,v,y,h,U,w,E,N,S,x,C,P,R;return{setters:[e=>{a=e.d,t=e.u,i=e.r,u=e.a,n=e.b,o=e.w,d=e.e,r=e.f,c=e.o,s=e.g,m=e.I,f=e.h,p=e.z,g=e.A,_=e.i,b=e.j,V=e.k,v=e.l,y=e.m,h=e.q,U=e.s,w=e.t,E=e.K,N=e.L,S=e.an,x=e.x,C=e.v,P=e.y,R=e.C}],execute:function(){const l={class:"ion-padding"};e("default",a({__name:"NewRecipePage",setup(e){const a=r();t();const q=i(!1),D=u({titulo:"",categoria:"principal",dificultad:"media",tiempo:30,imagen:"",ingredientes:"",pasos:""});function I(e){return e.split("\n").map(e=>e.trim()).filter(e=>e.length>0)}async function j(){q.value=!0;try{var e;const l=null===(e=R.authStore.model)||void 0===e?void 0:e.id;if(!l)return void alert("Debes estar autenticado para crear recetas");const t={title:D.titulo.trim(),category:D.categoria,difficulty:D.dificultad,time:Number(D.tiempo),ingredients:JSON.stringify(I(D.ingredientes)),steps:JSON.stringify(I(D.pasos)),author:l};D.imagen.trim()&&(t.image=D.imagen.trim()),console.log("Creating recipe with payload:",t),await R.collection("recipes").create(t),a.replace("/tabs/home")}catch(l){console.error("Error creating recipe:",l),console.error("Error data:",l.data),alert(`Error al crear la receta: ${l.message||"Error desconocido"}`)}finally{q.value=!1}}return(e,a)=>(c(),n(d(P),null,{default:o(()=>[s(d(m),null,{default:o(()=>[s(d(f),null,{default:o(()=>[s(d(p),{slot:"start"},{default:o(()=>[s(d(g),{"default-href":"/home"})]),_:1}),s(d(_),null,{default:o(()=>[...a[7]||(a[7]=[b("Nueva Receta",-1)])]),_:1})]),_:1})]),_:1}),s(d(V),{class:"ion-padding"},{default:o(()=>[v("form",{onSubmit:y(j,["prevent"])},[s(d(h),null,{default:o(()=>[s(d(U),null,{default:o(()=>[s(d(w),{label:"Título","label-placement":"floating",modelValue:D.titulo,"onUpdate:modelValue":a[0]||(a[0]=e=>D.titulo=e),required:""},null,8,["modelValue"])]),_:1}),s(d(U),null,{default:o(()=>[s(d(E),{label:"Categoría",modelValue:D.categoria,"onUpdate:modelValue":a[1]||(a[1]=e=>D.categoria=e)},{default:o(()=>[s(d(N),{value:"entrante"},{default:o(()=>[...a[8]||(a[8]=[b("Entrante",-1)])]),_:1}),s(d(N),{value:"principal"},{default:o(()=>[...a[9]||(a[9]=[b("Principal",-1)])]),_:1}),s(d(N),{value:"postre"},{default:o(()=>[...a[10]||(a[10]=[b("Postre",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(d(U),null,{default:o(()=>[s(d(E),{label:"Dificultad",modelValue:D.dificultad,"onUpdate:modelValue":a[2]||(a[2]=e=>D.dificultad=e)},{default:o(()=>[s(d(N),{value:"facil"},{default:o(()=>[...a[11]||(a[11]=[b("Fácil",-1)])]),_:1}),s(d(N),{value:"media"},{default:o(()=>[...a[12]||(a[12]=[b("Media",-1)])]),_:1}),s(d(N),{value:"dificil"},{default:o(()=>[...a[13]||(a[13]=[b("Difícil",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(d(U),null,{default:o(()=>[s(d(w),{label:"Tiempo (min)",type:"number","label-placement":"floating",modelValue:D.tiempo,"onUpdate:modelValue":a[3]||(a[3]=e=>D.tiempo=e),required:""},null,8,["modelValue"])]),_:1}),s(d(U),null,{default:o(()=>[s(d(w),{label:"URL Imagen","label-placement":"floating",modelValue:D.imagen,"onUpdate:modelValue":a[4]||(a[4]=e=>D.imagen=e)},null,8,["modelValue"])]),_:1}),s(d(U),null,{default:o(()=>[s(d(S),{label:"Ingredientes (uno por línea)","label-placement":"floating",modelValue:D.ingredientes,"onUpdate:modelValue":a[5]||(a[5]=e=>D.ingredientes=e),rows:5},null,8,["modelValue"])]),_:1}),s(d(U),null,{default:o(()=>[s(d(S),{label:"Pasos (uno por línea)","label-placement":"floating",modelValue:D.pasos,"onUpdate:modelValue":a[6]||(a[6]=e=>D.pasos=e),rows:5},null,8,["modelValue"])]),_:1})]),_:1}),v("div",l,[s(d(x),{expand:"block",type:"submit",disabled:q.value},{default:o(()=>[b(C(q.value?"Guardando...":"Crear Receta"),1)]),_:1},8,["disabled"])])],32)]),_:1})]),_:1}))}}))}}});
