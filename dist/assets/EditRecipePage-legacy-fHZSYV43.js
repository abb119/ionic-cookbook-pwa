System.register(["./index-legacy-BLxyB22v.js"],function(e,l){"use strict";var a,t,i,n,o,u,d,r,s,c,m,f,p,g,_,b,y,V,v,h,U,w,E,k,q,x,A,j,C,P,G,I,R,S;return{setters:[e=>{a=e.d,t=e.r,i=e.ao,n=e.a,o=e.E,u=e.C,d=e.b,r=e.w,s=e.e,c=e.f,m=e.o,f=e.g,p=e.I,g=e.h,_=e.z,b=e.A,y=e.i,V=e.j,v=e.x,h=e.G,U=e.ae,w=e.k,E=e.n,k=e.m,q=e.l,x=e.q,A=e.s,j=e.t,C=e.K,P=e.L,G=e.an,I=e.v,R=e.M,S=e.y}],execute:function(){const l={class:"ion-padding"},D={key:1,class:"ion-text-center ion-padding"};e("default",a({__name:"EditRecipePage",setup(e){const a=i(),L=c(),M=t(!1),T=t(!1),z=a.params.id,F=n({titulo:"",categoria:"principal",dificultad:"media",tiempo:30,imagen:"",ingredientes:"",pasos:""});function K(e){return e.split("\n").map(e=>e.trim()).filter(e=>e.length>0)}async function N(){M.value=!0;try{const e={title:F.titulo.trim(),category:F.categoria,difficulty:F.dificultad,time:Number(F.tiempo),image:F.imagen.trim()||null,ingredients:K(F.ingredientes),steps:K(F.pasos)};await u.collection("recipes").update(z,e),L.replace("/tabs/home")}catch(e){console.error(e),alert("Error al guardar cambios")}finally{M.value=!1}}async function O(){if(confirm("¿Seguro que quieres eliminar esta receta?"))try{await u.collection("recipes").delete(z),L.replace("/tabs/home")}catch(e){console.error(e),alert("Error al eliminar")}}return o(async()=>{try{const e=await u.collection("recipes").getOne(z);F.titulo=e.title,F.categoria=e.category,F.dificultad=e.difficulty,F.tiempo=e.time,F.imagen=e.image||"",F.ingredientes=Array.isArray(e.ingredients)?e.ingredients.join("\n"):e.ingredients,F.pasos=Array.isArray(e.steps)?e.steps.join("\n"):e.steps,T.value=!0}catch(e){console.error(e)}}),(e,a)=>(m(),d(s(S),null,{default:r(()=>[f(s(p),null,{default:r(()=>[f(s(g),null,{default:r(()=>[f(s(_),{slot:"start"},{default:r(()=>[f(s(b),{"default-href":"/home"})]),_:1}),f(s(y),null,{default:r(()=>[...a[7]||(a[7]=[V("Editar Receta",-1)])]),_:1}),f(s(_),{slot:"end"},{default:r(()=>[f(s(v),{color:"danger",onClick:O},{default:r(()=>[f(s(h),{icon:s(U)},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}),f(s(w),{class:"ion-padding"},{default:r(()=>[T.value?(m(),E("form",{key:0,onSubmit:k(N,["prevent"])},[f(s(x),null,{default:r(()=>[f(s(A),null,{default:r(()=>[f(s(j),{label:"Título","label-placement":"floating",modelValue:F.titulo,"onUpdate:modelValue":a[0]||(a[0]=e=>F.titulo=e),required:""},null,8,["modelValue"])]),_:1}),f(s(A),null,{default:r(()=>[f(s(C),{label:"Categoría",modelValue:F.categoria,"onUpdate:modelValue":a[1]||(a[1]=e=>F.categoria=e)},{default:r(()=>[f(s(P),{value:"entrante"},{default:r(()=>[...a[8]||(a[8]=[V("Entrante",-1)])]),_:1}),f(s(P),{value:"principal"},{default:r(()=>[...a[9]||(a[9]=[V("Principal",-1)])]),_:1}),f(s(P),{value:"postre"},{default:r(()=>[...a[10]||(a[10]=[V("Postre",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),f(s(A),null,{default:r(()=>[f(s(C),{label:"Dificultad",modelValue:F.dificultad,"onUpdate:modelValue":a[2]||(a[2]=e=>F.dificultad=e)},{default:r(()=>[f(s(P),{value:"facil"},{default:r(()=>[...a[11]||(a[11]=[V("Fácil",-1)])]),_:1}),f(s(P),{value:"media"},{default:r(()=>[...a[12]||(a[12]=[V("Media",-1)])]),_:1}),f(s(P),{value:"dificil"},{default:r(()=>[...a[13]||(a[13]=[V("Difícil",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),f(s(A),null,{default:r(()=>[f(s(j),{label:"Tiempo (min)",type:"number","label-placement":"floating",modelValue:F.tiempo,"onUpdate:modelValue":a[3]||(a[3]=e=>F.tiempo=e),required:""},null,8,["modelValue"])]),_:1}),f(s(A),null,{default:r(()=>[f(s(j),{label:"URL Imagen","label-placement":"floating",modelValue:F.imagen,"onUpdate:modelValue":a[4]||(a[4]=e=>F.imagen=e)},null,8,["modelValue"])]),_:1}),f(s(A),null,{default:r(()=>[f(s(G),{label:"Ingredientes (uno por línea)","label-placement":"floating",modelValue:F.ingredientes,"onUpdate:modelValue":a[5]||(a[5]=e=>F.ingredientes=e),rows:5},null,8,["modelValue"])]),_:1}),f(s(A),null,{default:r(()=>[f(s(G),{label:"Pasos (uno por línea)","label-placement":"floating",modelValue:F.pasos,"onUpdate:modelValue":a[6]||(a[6]=e=>F.pasos=e),rows:5},null,8,["modelValue"])]),_:1})]),_:1}),q("div",l,[f(s(v),{expand:"block",type:"submit",disabled:M.value},{default:r(()=>[V(I(M.value?"Guardando...":"Guardar Cambios"),1)]),_:1},8,["disabled"])])],32)):(m(),E("div",D,[f(s(R))]))]),_:1})]),_:1}))}}))}}});
