import{d as v,u as y,r as S,a as w,b as N,w as t,e as l,f as U,o as x,g as a,I as B,h as C,z as T,A as k,i as E,j as i,k as P,l as p,m as R,q as _,s as u,t as m,K as g,L as r,an as b,x as D,v as q,y as A,C as V}from"./index-yNZZBFxb.js";const L={class:"ion-padding"},M=v({__name:"NewRecipePage",setup(O){const I=U();y();const s=S(!1),o=w({titulo:"",categoria:"principal",dificultad:"media",tiempo:30,imagen:"",ingredientes:"",pasos:""});function f(d){return d.split("\n").map(e=>e.trim()).filter(e=>e.length>0)}async function c(){var d;s.value=!0;try{const e=(d=V.authStore.model)==null?void 0:d.id;if(!e){alert("Debes estar autenticado para crear recetas");return}const n={title:o.titulo.trim(),category:o.categoria,difficulty:o.dificultad,time:Number(o.tiempo),ingredients:JSON.stringify(f(o.ingredientes)),steps:JSON.stringify(f(o.pasos)),author:e};o.imagen.trim()&&(n.image=o.imagen.trim()),console.log("Creating recipe with payload:",n),await V.collection("recipes").create(n),I.replace("/tabs/home")}catch(e){console.error("Error creating recipe:",e),console.error("Error data:",e.data),alert("Error al crear la receta: ".concat(e.message||"Error desconocido"))}finally{s.value=!1}}return(d,e)=>(x(),N(l(A),null,{default:t(()=>[a(l(B),null,{default:t(()=>[a(l(C),null,{default:t(()=>[a(l(T),{slot:"start"},{default:t(()=>[a(l(k),{"default-href":"/home"})]),_:1}),a(l(E),null,{default:t(()=>[...e[7]||(e[7]=[i("Nueva Receta",-1)])]),_:1})]),_:1})]),_:1}),a(l(P),{class:"ion-padding"},{default:t(()=>[p("form",{onSubmit:R(c,["prevent"])},[a(l(_),null,{default:t(()=>[a(l(u),null,{default:t(()=>[a(l(m),{label:"Título","label-placement":"floating",modelValue:o.titulo,"onUpdate:modelValue":e[0]||(e[0]=n=>o.titulo=n),required:""},null,8,["modelValue"])]),_:1}),a(l(u),null,{default:t(()=>[a(l(g),{label:"Categoría",modelValue:o.categoria,"onUpdate:modelValue":e[1]||(e[1]=n=>o.categoria=n)},{default:t(()=>[a(l(r),{value:"entrante"},{default:t(()=>[...e[8]||(e[8]=[i("Entrante",-1)])]),_:1}),a(l(r),{value:"principal"},{default:t(()=>[...e[9]||(e[9]=[i("Principal",-1)])]),_:1}),a(l(r),{value:"postre"},{default:t(()=>[...e[10]||(e[10]=[i("Postre",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(l(u),null,{default:t(()=>[a(l(g),{label:"Dificultad",modelValue:o.dificultad,"onUpdate:modelValue":e[2]||(e[2]=n=>o.dificultad=n)},{default:t(()=>[a(l(r),{value:"facil"},{default:t(()=>[...e[11]||(e[11]=[i("Fácil",-1)])]),_:1}),a(l(r),{value:"media"},{default:t(()=>[...e[12]||(e[12]=[i("Media",-1)])]),_:1}),a(l(r),{value:"dificil"},{default:t(()=>[...e[13]||(e[13]=[i("Difícil",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(l(u),null,{default:t(()=>[a(l(m),{label:"Tiempo (min)",type:"number","label-placement":"floating",modelValue:o.tiempo,"onUpdate:modelValue":e[3]||(e[3]=n=>o.tiempo=n),required:""},null,8,["modelValue"])]),_:1}),a(l(u),null,{default:t(()=>[a(l(m),{label:"URL Imagen","label-placement":"floating",modelValue:o.imagen,"onUpdate:modelValue":e[4]||(e[4]=n=>o.imagen=n)},null,8,["modelValue"])]),_:1}),a(l(u),null,{default:t(()=>[a(l(b),{label:"Ingredientes (uno por línea)","label-placement":"floating",modelValue:o.ingredientes,"onUpdate:modelValue":e[5]||(e[5]=n=>o.ingredientes=n),rows:5},null,8,["modelValue"])]),_:1}),a(l(u),null,{default:t(()=>[a(l(b),{label:"Pasos (uno por línea)","label-placement":"floating",modelValue:o.pasos,"onUpdate:modelValue":e[6]||(e[6]=n=>o.pasos=n),rows:5},null,8,["modelValue"])]),_:1})]),_:1}),p("div",L,[a(l(D),{expand:"block",type:"submit",disabled:s.value},{default:t(()=>[i(q(s.value?"Guardando...":"Crear Receta"),1)]),_:1},8,["disabled"])])],32)]),_:1})]),_:1}))}});export{M as default};
